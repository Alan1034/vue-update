<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>wathch</title>
  </head>
  <body>
    <script src="./watch.js"></script>
    <script>
      let wm = new watcher({
        data: {
          b: "hello",
        },
        watch: {
          b(newVal, oldVal) {
            console.log("old value = ", oldVal, ",new value = ", newVal);
          },
        },
      });

      wm.b = "JShaman.com";
      wm.b = "ShareWAF.com";
    </script>

    <!-- <script>
      let a = {};
      const handler = {
        get: function (obj, prop) {
          return prop in obj ? obj[prop] : 37;
        },
        set: function (obj, prop, value) {
          console.log(obj, prop, value);

          if (value === 3 && p) {
            p[prop] = 8888;
            a[prop] = "999";
            return;
          }
          obj[prop] = value;
          return true;
        },
      };

      const p = new Proxy(a, handler);
      p.a = 1;
      p.b = undefined;
      p.d = 3;

      console.log(p.a, p.b, p.d); // 1, undefined
      console.log("c" in p, p.c); // false, 37
      a.a = 2;
      console.log(a);
      console.log(p);
    </script> -->

    <script>
      let objectA={}
      const handler={
        defineProperty(target,prop,descriptor){
          console.log(target,prop,descriptor)
          return Object.defineProperty(target,prop,descriptor)
        }
      }
      const objectB=new Proxy(objectA,handler)
      objectB.a=1
      objectB.b=undefined

      console.log(objectA)
      console.log(objectB)
    </script>
  </body>
</html>
